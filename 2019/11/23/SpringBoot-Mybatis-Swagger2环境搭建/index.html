<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.worldofwarcraftchina.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="SpringBoot+Mybatis+Swagger2环境搭建 这篇文章是我从公众号上找到的。现在大多数的公众号都喜欢互相转载文章，这篇也是我关注的人从别的哪里转载过来了。很喜欢这个文章的排版和内容，就在自己这里保存一下。作者：calebmanhttps:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;95946d6b0c7d">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot+Mybatis+Swagger2环境搭建">
<meta property="og:url" content="http://www.worldofwarcraftchina.cn/2019/11/23/SpringBoot-Mybatis-Swagger2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/index.html">
<meta property="og:site_name" content="blogs">
<meta property="og:description" content="SpringBoot+Mybatis+Swagger2环境搭建 这篇文章是我从公众号上找到的。现在大多数的公众号都喜欢互相转载文章，这篇也是我关注的人从别的哪里转载过来了。很喜欢这个文章的排版和内容，就在自己这里保存一下。作者：calebmanhttps:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;95946d6b0c7d">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.worldofwarcraftchina.cn/b1.png">
<meta property="og:image" content="http://www.worldofwarcraftchina.cn/b2.png">
<meta property="og:image" content="http://www.worldofwarcraftchina.cn/b3.png">
<meta property="og:image" content="http://www.worldofwarcraftchina.cn/b4.png">
<meta property="og:image" content="http://www.worldofwarcraftchina.cn/b5.png">
<meta property="article:published_time" content="2019-11-23T09:37:02.000Z">
<meta property="article:modified_time" content="2020-05-28T09:30:41.423Z">
<meta property="article:author" content="Ezio">
<meta property="article:tag" content="Spring boot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.worldofwarcraftchina.cn/b1.png">


<link rel="canonical" href="http://www.worldofwarcraftchina.cn/2019/11/23/SpringBoot-Mybatis-Swagger2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://www.worldofwarcraftchina.cn/2019/11/23/SpringBoot-Mybatis-Swagger2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","path":"2019/11/23/SpringBoot-Mybatis-Swagger2环境搭建/","title":"SpringBoot+Mybatis+Swagger2环境搭建"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SpringBoot+Mybatis+Swagger2环境搭建 | blogs</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">blogs</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot-Mybatis-Swagger2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">1.</span> <span class="nav-text">SpringBoot+Mybatis+Swagger2环境搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E6%96%87%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">本文简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8SpringBoot"><span class="nav-number">1.2.</span> <span class="nav-text">为什么使用SpringBoot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%AD%E5%BB%BA%E6%80%8E%E6%A0%B7%E4%B8%80%E4%B8%AA%E7%8E%AF%E5%A2%83"><span class="nav-number">1.3.</span> <span class="nav-text">搭建怎样一个环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="nav-number">1.4.</span> <span class="nav-text">开发环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.5.</span> <span class="nav-text">导入快速启动项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E6%88%90%E5%89%8D%E5%87%86%E5%A4%87"><span class="nav-number">1.6.</span> <span class="nav-text">集成前准备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-properties%E4%B8%BA-yml"><span class="nav-number">1.6.1.</span> <span class="nav-text">修改.properties为.yml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96"><span class="nav-number">1.6.2.</span> <span class="nav-text">配置所需依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E6%88%90Mybatis"><span class="nav-number">1.6.3.</span> <span class="nav-text">集成Mybatis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEdruid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">1.6.4.</span> <span class="nav-text">配置druid数据库连接池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEpagehelper%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="nav-number">1.6.5.</span> <span class="nav-text">配置pagehelper分页插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E9%80%86%E5%90%91%E7%94%9F%E6%88%90%E6%8F%92%E4%BB%B6mybatis-generator%E7%9A%84%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%BF%90%E8%A1%8C"><span class="nav-number">1.6.6.</span> <span class="nav-text">代码逆向生成插件mybatis-generator的配置及运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mybatis%E6%89%AB%E6%8F%8F%E5%8C%85%E9%85%8D%E7%BD%AE"><span class="nav-number">1.6.7.</span> <span class="nav-text">mybatis扫描包配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95mapper%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7"><span class="nav-number">1.6.8.</span> <span class="nav-text">测试mapper的有效性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E6%88%90Swagger2"><span class="nav-number">1.7.</span> <span class="nav-text">集成Swagger2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%BB%BA%E7%AB%8BSwaggerConfig%E6%96%87%E4%BB%B6"><span class="nav-number">1.7.1.</span> <span class="nav-text">1.建立SwaggerConfig文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9C%A8SpringBootExampleApplication-java%E4%B8%AD%E5%90%AF%E7%94%A8Swagger2%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.7.2.</span> <span class="nav-text">2.在SpringBootExampleApplication.java中启用Swagger2注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.7.3.</span> <span class="nav-text">3.常用注解示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%94%9F%E6%88%90json%E5%BD%A2%E5%BC%8F%E7%9A%84%E6%96%87%E6%A1%A3"><span class="nav-number">1.7.4.</span> <span class="nav-text">4.生成json形式的文档</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-number">1.8.</span> <span class="nav-text">多环境配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE"><span class="nav-number">1.8.1.</span> <span class="nav-text">多环境下的日志配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">1.9.</span> <span class="nav-text">常用配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE"><span class="nav-number">1.9.1.</span> <span class="nav-text">加载自定义配置</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ezio</p>
  <div class="site-description" itemprop="description">java</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">91</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.worldofwarcraftchina.cn/2019/11/23/SpringBoot-Mybatis-Swagger2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ezio">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
      <meta itemprop="description" content="java">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SpringBoot+Mybatis+Swagger2环境搭建 | blogs">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringBoot+Mybatis+Swagger2环境搭建
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-11-23 17:37:02" itemprop="dateCreated datePublished" datetime="2019-11-23T17:37:02+08:00">2019-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-05-28 17:30:41" itemprop="dateModified" datetime="2020-05-28T17:30:41+08:00">2020-05-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="SpringBoot-Mybatis-Swagger2环境搭建"><a href="#SpringBoot-Mybatis-Swagger2环境搭建" class="headerlink" title="SpringBoot+Mybatis+Swagger2环境搭建"></a>SpringBoot+Mybatis+Swagger2环境搭建</h1><blockquote>
<p>这篇文章是我从公众号上找到的。现在大多数的公众号都喜欢互相转载文章，这篇也是我关注的人从别的哪里转载过来了。很喜欢这个文章的排版和内容，就在自己这里保存一下。<br>作者：calebman<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/95946d6b0c7d">https://www.jianshu.com/p/95946d6b0c7d</a></p>
</blockquote>
<span id="more"></span>

<h2 id="本文简介"><a href="#本文简介" class="headerlink" title="本文简介"></a>本文简介</h2><ul>
<li>为什么使用SpringBoot</li>
<li>搭建怎样一个环境</li>
<li>开发环境</li>
<li>导入快速启动项目</li>
<li>集成前准备</li>
<li>集成Mybatis</li>
<li>集成Swagger2</li>
<li>多环境配置</li>
<li>多环境下的日志配置</li>
<li>常用配置</li>
</ul>
<h2 id="为什么使用SpringBoot"><a href="#为什么使用SpringBoot" class="headerlink" title="为什么使用SpringBoot"></a>为什么使用SpringBoot</h2><p>SpringBoot相对于传统的SSM框架的优点是提供了默认的样板化配置，简化了Spring应用的初始搭建过程，如果你不想被众多的xml配置文件困扰，可以考虑使用SpringBoot替代</p>
<h2 id="搭建怎样一个环境"><a href="#搭建怎样一个环境" class="headerlink" title="搭建怎样一个环境"></a>搭建怎样一个环境</h2><p>本文将基于Spring官方提供的快速启动项目模板集成Mybatis、Swagger2框架，并讲解mybatis generator一键生成代码插件、logback、一键生成文档以及多环境的配置方法，最后再介绍一下自定义配置的注解获取、全局异常处理等经常用到的东西。</p>
<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>本人使用IDEA作为开发工具，IDEA下载时默认集成了SpringBoot的快速启动项目可以直接创建，如果使用Eclipse的同学可以考虑安装SpringBoot插件或者直接从这里配置并下载SpringBoot快速启动项目，需要注意的是本次环境搭建选择的是SpringBoot2.0的快速启动框架，SpringBoot2.0要求jdk版本必须要在1.8及以上。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://start.spring.io/">https://start.spring.io/</a></p>
</blockquote>
<h2 id="导入快速启动项目"><a href="#导入快速启动项目" class="headerlink" title="导入快速启动项目"></a>导入快速启动项目</h2><p>不管是由IDEA导入还是现实下载模板工程都需要初始化快速启动工程的配置，如果使用IDEA，在新建项目时选择Spring Initializr，主要配置如下图<br><img src="/b1.png" alt="IDEA新建SpringBoot项目-填写项目/包名"></p>
<p><img src="/b2.png" alt="IDEA新建SpringBoot项目-选择依赖包"></p>
<p>点击next之后finish之后IDEA显示正在下载模板工程，下载完成后会根据pom.xml下载包依赖，依赖下载完毕后模板项目就算创建成功了，如果是直接从官方网站配置下载快速启动项目可参考下图配置<br><img src="/b3.png" alt="直接下载SpringBoot快速启动项目-项目配置"></p>
<p>从Search for dependencies 框中输入并选择Web、Mysql、Mybatis加入依赖，点击Generate Project下载快速启动项目，然后在IDE中选择导入Maven项目，项目导入完成后可见其目录结构如下图</p>
<p><img src="/b4.png" alt="快速启动项目-项目结构"></p>
<p>需要关注红色方框圈起来的部分，由上往下第一个java类是用来启动项目的入口函数，第二个properties后缀的文件是项目的配置文件，第三个是项目的依赖包以及执行插件的配置</p>
<h2 id="集成前准备"><a href="#集成前准备" class="headerlink" title="集成前准备"></a>集成前准备</h2><h3 id="修改-properties为-yml"><a href="#修改-properties为-yml" class="headerlink" title="修改.properties为.yml"></a>修改.properties为.yml</h3><p>yml相对于properties更加精简而且很多官方给出的Demo都是yml的配置形式，在这里我们采用yml的形式代替properties，相对于properties形式主要有以下两点不同</p>
<ul>
<li>对于键的描述由原有的 “.” 分割变成了树的形状</li>
<li>对于所有的键的后面一个要跟一个空格，不然启动项目会报配置解析错误</li>
</ul>
<blockquote>
<p>这也是我现在的项目中使用的配置文件的方式，树状结构从显示上来说比properties的扁平化结构清晰的多。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># properties式语法描述</span><br><span class="line">spring.datasource.name = mysql</span><br><span class="line">spring.datasource.url = jdbc:mysql://localhost:3306/db?characterEncoding=utf-8</span><br><span class="line">spring.datasource.username = root</span><br><span class="line">spring.datasource.password = 123</span><br><span class="line"># yml式语法描述</span><br><span class="line">spring:</span><br><span class="line">    datasource:</span><br><span class="line">        name: mysql</span><br><span class="line">        url: jdbc:mysql://localhost:3306/db?characterEncoding=utf-8</span><br><span class="line">        username: root</span><br><span class="line">        password: 123</span><br></pre></td></tr></table></figure>

<h3 id="配置所需依赖"><a href="#配置所需依赖" class="headerlink" title="配置所需依赖"></a>配置所需依赖</h3><p>快速启动项目创建成功后我们观察其pom.xml文件中的依赖如下图，包含了我们选择的Web、Mybatis以及Mysql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- spring web mvc --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- mybatis --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- mysql --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- test --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>但是我们使用ORM框架一般还会配合数据库连接池以及分页插件来使用，在这里我选择了阿里的druid以及pagehelper这个分页插件，再加上我们还需要整合swagger2文档自动化构建框架，所以增加了以下四个依赖项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 分页插件 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.3&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!-- alibaba的druid数据库连接池 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.1.1&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!-- alibaba的json格式化对象 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.31&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!-- 自动生成API文档 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.5.0&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里我现在使用的是gradle管理jar包。感觉比maven减少了行数。清晰一些。</p>
</blockquote>
<h3 id="集成Mybatis"><a href="#集成Mybatis" class="headerlink" title="集成Mybatis"></a>集成Mybatis</h3><p>Mybatis的配置主要包括了druid数据库连接池、pagehelper分页插件、mybatis-generator代码逆向生成插件以及mapper、pojo扫描配置</p>
<h3 id="配置druid数据库连接池"><a href="#配置druid数据库连接池" class="headerlink" title="配置druid数据库连接池"></a>配置druid数据库连接池</h3><p>添加以下配置至application.yml文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">    datasource:</span><br><span class="line">        # 如果存在多个数据源，监控的时候可以通过名字来区分开来</span><br><span class="line">        name: mysql</span><br><span class="line">        # 连接数据库的url</span><br><span class="line">        url: jdbc:mysql://localhost:3306/db?characterEncoding=utf-8</span><br><span class="line">        # 连接数据库的账号</span><br><span class="line">        username: root</span><br><span class="line">        #  连接数据库的密码</span><br><span class="line">        password: 123</span><br><span class="line">        # 使用druid数据源</span><br><span class="line">        type: com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">        # 扩展插件</span><br><span class="line">        # 监控统计用的filter:stat 日志用的filter:log4j 防御sql注入的filter:wall</span><br><span class="line">        filters: stat</span><br><span class="line">        # 最大连接池数量</span><br><span class="line">        maxActive: 20</span><br><span class="line">        # 初始化时建立物理连接的个数。初始化发生在显示调用init方法，或者第一次getConnection时</span><br><span class="line">        initialSize: 1</span><br><span class="line">        # 获取连接时最大等待时间，单位毫秒</span><br><span class="line">        maxWait: 60000</span><br><span class="line">        # 最小连接池数量</span><br><span class="line">        minIdle: 1</span><br><span class="line">        timeBetweenEvictionRunsMillis: 60000</span><br><span class="line">        # 连接保持空闲而不被驱逐的最长时间</span><br><span class="line">        minEvictableIdleTimeMillis: 300000</span><br><span class="line">        # 用来检测连接是否有效的sql，要求是一个查询语句</span><br><span class="line">        # 如果validationQuery为null，testOnBorrow、testOnReturn、testWhileIdle都不会其作用</span><br><span class="line">        validationQuery: select count(1) from &#x27;table&#x27;</span><br><span class="line">        # 申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRunsMillis，执行validationQuery检测连接是否有效</span><br><span class="line">        testWhileIdle: true</span><br><span class="line">        # 申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能</span><br><span class="line">        testOnBorrow: false</span><br><span class="line">        # 归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能</span><br><span class="line">        testOnReturn: false</span><br><span class="line">        # 是否缓存preparedStatement，即PSCache</span><br><span class="line">        poolPreparedStatements: false</span><br><span class="line">        # 要启用PSCache，必须配置大于0，当大于0时，poolPreparedStatements自动触发修改为true</span><br><span class="line">        maxOpenPreparedStatements: -1</span><br></pre></td></tr></table></figure>

<h3 id="配置pagehelper分页插件"><a href="#配置pagehelper分页插件" class="headerlink" title="配置pagehelper分页插件"></a>配置pagehelper分页插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># pagehelper分页插件</span><br><span class="line">pagehelper:</span><br><span class="line">    # 数据库的方言</span><br><span class="line">    helperDialect: mysql</span><br><span class="line">    # 启用合理化，如果pageNum &lt; 1会查询第一页，如果pageNum &gt; pages会查询最后一页</span><br><span class="line">    reasonable: true</span><br></pre></td></tr></table></figure>

<h3 id="代码逆向生成插件mybatis-generator的配置及运行"><a href="#代码逆向生成插件mybatis-generator的配置及运行" class="headerlink" title="代码逆向生成插件mybatis-generator的配置及运行"></a>代码逆向生成插件mybatis-generator的配置及运行</h3><p>mybatis-generator插件的使用主要分为以下三步</p>
<p><strong>1.pom.xml中添加mybatis-generator插件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;!-- 将Spring Boot应用打包为可执行的jar或war文件 --&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">            &lt;!-- mybatis generator 自动生成代码插件 --&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;!-- 扫描resources/generator目录下的generatorConfig.xml配置 --&gt;</span><br><span class="line">                    &lt;configurationFile&gt;</span><br><span class="line">                        $&#123;basedir&#125;/src/main/resources/generator/generatorConfig.xml</span><br><span class="line">                    &lt;/configurationFile&gt;</span><br><span class="line">                    &lt;overwrite&gt;true&lt;/overwrite&gt;</span><br><span class="line">                    &lt;verbose&gt;true&lt;/verbose&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br></pre></td></tr></table></figure>
<p><strong>2.创建逆向代码生成配置文件generatorConfig.xml</strong></p>
<p>参照pom.xml插件配置中的扫描位置，在resources目录下创建generator文件夹，在新建的文件夹中创建generatorConfig.xml配置文件，文件的详细配置信息如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line">    &lt;!-- 运行方式:mvaen运行命令 mybatis-generator:generate -e --&gt;</span><br><span class="line">    &lt;!-- 数据库驱动:选择你的本地硬盘上面的数据库驱动包--&gt;</span><br><span class="line">    &lt;properties resource=&quot;generator/generator.properties&quot;/&gt;</span><br><span class="line">    &lt;classPathEntry location=&quot;$&#123;classPathEntry&#125;&quot;/&gt;</span><br><span class="line">    &lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3&quot;&gt;</span><br><span class="line">        &lt;!--数据库链接URL，用户名、密码 --&gt;</span><br><span class="line">        &lt;jdbcConnection</span><br><span class="line">                driverClass=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">                connectionURL=&quot;jdbc:mysql://localhost:3306/$&#123;db&#125;?characterEncoding=utf-8&quot;</span><br><span class="line">                userId=&quot;$&#123;userId&#125;&quot;</span><br><span class="line">                password=&quot;$&#123;password&#125;&quot;&gt;</span><br><span class="line">        &lt;/jdbcConnection&gt;</span><br><span class="line">        &lt;javaTypeResolver&gt;</span><br><span class="line">            &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot;/&gt;</span><br><span class="line">        &lt;/javaTypeResolver&gt;</span><br><span class="line">        &lt;javaModelGenerator targetPackage=&quot;$&#123;pojoTargetPackage&#125;&quot; targetProject=&quot;src/main/java&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/javaModelGenerator&gt;</span><br><span class="line">        &lt;!-- 生成映射文件的包名和位置--&gt;</span><br><span class="line">        &lt;sqlMapGenerator targetPackage=&quot;$&#123;mapperTargetPackage&#125;&quot; targetProject=&quot;src/main/resources&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/sqlMapGenerator&gt;</span><br><span class="line">        &lt;!-- 生成DAO的包名和位置--&gt;</span><br><span class="line">        &lt;javaClientGenerator type=&quot;XMLMAPPER&quot; targetPackage=&quot;$&#123;daoTargetPackage&#125;&quot; targetProject=&quot;src/main/java&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/javaClientGenerator&gt;</span><br><span class="line">        &lt;!-- 要生成的表 tableName是数据库中的表名或视图名 schema是数据库名称--&gt;</span><br><span class="line">        &lt;table tableName=&quot;%&quot; schema=&quot;$&#123;db&#125;&quot;/&gt;</span><br><span class="line">    &lt;/context&gt;</span><br><span class="line">&lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>

<p>为了将generatorConfig.xml配置模板化，在这里将变动性较大的配置项单独提取出来作为一个generatorConfig.xml的配置文件，然后通过properties标签读取此文件的配置，这样做的好处是当需要多处复用此xml时只需要关注少量的配置项。</p>
<p>在generatorConfig.xml同级创建generator.properties文件，现只需要配置generator.properties文件即可，配置内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 请手动配置以下选项</span><br><span class="line"># 数据库驱动:选择你的本地硬盘上面的数据库驱动包</span><br><span class="line">classPathEntry = D:/CJH/maven-repository/mysql/mysql-connector-java/5.1.30/mysql-connector-java-5.1.30.jar</span><br><span class="line"># 数据库名称、用户名、密码</span><br><span class="line">db = db</span><br><span class="line">userId = root</span><br><span class="line">password = 123</span><br><span class="line"># 生成pojo的包名位置 在src/main/java目录下</span><br><span class="line">pojoTargetPackage = com.spring.demo.springbootexample.mybatis.po</span><br><span class="line"># 生成DAO的包名位置 在src/main/java目录下</span><br><span class="line">daoTargetPackage = com.spring.demo.springbootexample.mybatis.mapper</span><br><span class="line"># 生成Mapper的包名位置 位于src/main/resources目录下</span><br><span class="line">mapperTargetPackage = mapper</span><br></pre></td></tr></table></figure>

<p><strong>3.运行mybatis-generator插件生成Dao、Model、Mapping</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 打开命令行cd到项目pom.xml同级目录运行以下命令</span><br><span class="line">mvn mybatis-generator:generate -e</span><br></pre></td></tr></table></figure>

<h3 id="mybatis扫描包配置"><a href="#mybatis扫描包配置" class="headerlink" title="mybatis扫描包配置"></a>mybatis扫描包配置</h3><p>至此已经生成了指定数据库对应的实体、映射类，但是还不能直接使用，需要配置mybatis扫描地址后才能正常调用</p>
<p><strong>1.在application.yml配置mapper.xml以及pojo的包地址</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mybatis:</span><br><span class="line">    # mapper.xml包地址</span><br><span class="line">    mapper-locations: classpath:mapper/*.xml</span><br><span class="line">    # pojo生成包地址</span><br><span class="line">    type-aliases-package: com.spring.demo.springbootexample.mybatis.po</span><br></pre></td></tr></table></figure>

<p><strong>2.在SpringBootExampleApplication.java中开启Mapper扫描注解</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan(&quot;com.spring.demo.springbootexample.mybatis.mapper&quot;)</span><br><span class="line">public class SpringBootExampleApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(SpringBootExampleApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="测试mapper的有效性"><a href="#测试mapper的有效性" class="headerlink" title="测试mapper的有效性"></a>测试mapper的有效性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class TestController &#123;</span><br><span class="line">    //替换成自己生成的mapper</span><br><span class="line">    @Autowired</span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/test&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Object test()&#123;</span><br><span class="line">        //查询该表的所有数据</span><br><span class="line">        return userMapper.selectByExample(null);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动SpringBootExampleApplication.java的main函数，如果没有在application.yml特意配置server.port那么springboot会采用默认的8080端口运行，运行成功将打印如下日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>在浏览器输入地址如果返回表格的中的所有数据代表mybatis集成成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/test</span><br></pre></td></tr></table></figure>

<h2 id="集成Swagger2"><a href="#集成Swagger2" class="headerlink" title="集成Swagger2"></a>集成Swagger2</h2><p>Swagger2是一个文档快速构建工具，能够通过注解自动生成一个Restful风格json形式的接口文档，并可以通过如swagger-ui等工具生成html网页形式的接口文档，swagger2的集成比较简单，使用需要稍微熟悉一下，集成、注解与使用分如下四步</p>
<h3 id="1-建立SwaggerConfig文件"><a href="#1-建立SwaggerConfig文件" class="headerlink" title="1.建立SwaggerConfig文件"></a>1.建立SwaggerConfig文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class SwaggerConfig &#123;</span><br><span class="line">    // 接口版本号</span><br><span class="line">    private final String version = &quot;1.0&quot;;</span><br><span class="line">    // 接口大标题</span><br><span class="line">    private final String title = &quot;SpringBoot示例工程&quot;;</span><br><span class="line">    // 具体的描述</span><br><span class="line">    private final String description = &quot;API文档自动生成示例&quot;;</span><br><span class="line">    // 服务说明url</span><br><span class="line">    private final String termsOfServiceUrl = &quot;http://www.kingeid.com&quot;;</span><br><span class="line">    // licence</span><br><span class="line">    private final String license = &quot;MIT&quot;;</span><br><span class="line">    // licnce url</span><br><span class="line">    private final String licenseUrl = &quot;https://mit-license.org/&quot;;</span><br><span class="line">    // 接口作者联系方式</span><br><span class="line">    private final Contact contact = new Contact(&quot;calebman&quot;, &quot;https://github.com/calebman&quot;, &quot;chenjianhui0428@gmail.com&quot;);</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public Docket buildDocket() &#123;</span><br><span class="line">        return new Docket(DocumentationType.SWAGGER_2).apiInfo(buildApiInf())</span><br><span class="line">                .select().build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private ApiInfo buildApiInf() &#123;</span><br><span class="line">        return new ApiInfoBuilder().title(title).termsOfServiceUrl(termsOfServiceUrl).description(description)</span><br><span class="line">                .version(version).license(license).licenseUrl(licenseUrl).contact(contact).build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-在SpringBootExampleApplication-java中启用Swagger2注解"><a href="#2-在SpringBootExampleApplication-java中启用Swagger2注解" class="headerlink" title="2.在SpringBootExampleApplication.java中启用Swagger2注解"></a>2.在SpringBootExampleApplication.java中启用Swagger2注解</h3><p>在@SpringBootApplication注解下面加上@EnableSwagger2注解</p>
<h3 id="3-常用注解示例"><a href="#3-常用注解示例" class="headerlink" title="3.常用注解示例"></a>3.常用注解示例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//Contorller中的注解示例</span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/v1/product&quot;)</span><br><span class="line">// 表示标识这个类是swagger的资源 </span><br><span class="line">@Api(value = &quot;DocController&quot;, tags = &#123;&quot;restful api示例&quot;&#125;)</span><br><span class="line">public class DocController extends BaseController &#123;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(value = &quot;/&#123;id&#125;&quot;, method = RequestMethod.PUT)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    //表示一个http请求的操作</span><br><span class="line">    @ApiOperation(value = &quot;修改指定产品&quot;, httpMethod = &quot;PUT&quot;, produces = &quot;application/json&quot;)</span><br><span class="line">    //@ApiImplicitParams用于方法，包含多个@ApiImplicitParam表示单独的请求参数 </span><br><span class="line">    @ApiImplicitParams(&#123;@ApiImplicitParam(name = &quot;id&quot;, value = &quot;产品ID&quot;, required = true, paramType = &quot;path&quot;)&#125;)</span><br><span class="line">    public WebResult update(@PathVariable(&quot;id&quot;) Integer id, @ModelAttribute Product product) &#123;</span><br><span class="line">        logger.debug(&quot;修改指定产品接收产品id与产品信息=&gt;%d,&#123;&#125;&quot;, id, product);</span><br><span class="line">        if (id == null || &quot;&quot;.equals(id)) &#123;</span><br><span class="line">            logger.debug(&quot;产品id不能为空&quot;);</span><br><span class="line">            return WebResult.error(ERRORDetail.RC_0101001);</span><br><span class="line">        &#125;</span><br><span class="line">        return WebResult.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//Model中的注解示例</span><br><span class="line">//表示对类进行说明，用于参数用实体类接收 </span><br><span class="line">@ApiModel(value = &quot;产品信息&quot;)</span><br><span class="line">public class Product &#123;</span><br><span class="line">    //表示对model属性的说明或者数据操作更改 </span><br><span class="line">    @ApiModelProperty(required = true, name = &quot;name&quot;, value = &quot;产品名称&quot;, dataType = &quot;query&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">    @ApiModelProperty(name = &quot;type&quot;, value = &quot;产品类型&quot;, dataType = &quot;query&quot;)</span><br><span class="line">    private String type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-生成json形式的文档"><a href="#4-生成json形式的文档" class="headerlink" title="4.生成json形式的文档"></a>4.生成json形式的文档</h3><p>集成成功后启动项目控制台会打印级别为INFO的日志，截取部分如下，表明可通过访问应用的v2&#x2F;api-docs接口得到文档api的json格式数据，可在浏览器输入指定地址验证集成是否成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Mapped &quot;&#123;[/v2/api-docs],methods=[GET],produces=[application/json || application/hal+json]&#125;&quot; </span><br><span class="line"> http://localhost:8080/v2/api-docs</span><br></pre></td></tr></table></figure>

<h2 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h2><p>应用研发过程中多环境是不可避免的，假设我们现在有开发、演示、生产三个不同的环境其配置也不同，如果每次都在打包环节来进行配置难免出错，SpringBoot支持通过命令启动不同的环境，但是配置文件需要满足application-{profile}.properties的格式，profile代表对应环境的标识，加载时可通过不同命令加载不同环境。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">application-dev.properties：开发环境</span><br><span class="line">application-test.properties：演示环境</span><br><span class="line">application-prod.properties：生产环境</span><br><span class="line"># 运行演示环境命令</span><br><span class="line">java -jar spring-boot-example-0.0.1-SNAPSHOT --spring.profiles.active=test</span><br></pre></td></tr></table></figure>

<p>基于现在的项目实现多环境我们需要在application.yml同级目录新建application-dev.yml、application-test.yml、application-prod.yml三个不同环境的配置文件，将不变的公有配置如druid的大部分、pagehelper分页插件以及mybatis包扫描配置放置于application.yml中，并在application.yml中配置默认采用开发环境，那么如果不带–spring.profiles.active启动应用就默认为开发环境启动，变动较大的配置如数据库的账号密码分别写入不同环境的配置文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">    profiles:</span><br><span class="line">      # 默认使用开发环境</span><br><span class="line">      active: dev</span><br></pre></td></tr></table></figure>

<p>配置到这里我们的项目目录结构如下图所示<br><img src="/b5.png"></p>
<p>至此我们分别完成了Mybatis、Swagger2以及多环境的集成，接下来我们配置多环境下的logger。对于logger我们总是希望在项目研发过程中越多越好，能够给予足够的信息定位bug，项目处于演示或者上线状态时为了不让日志打印影响程序性能我们只需要警告或者错误的日志，并且需要写入文件，那么接下来就基于logback实现多环境下的日志配置</p>
<h3 id="多环境下的日志配置"><a href="#多环境下的日志配置" class="headerlink" title="多环境下的日志配置"></a>多环境下的日志配置</h3><p>创建logback-spring.xml在application.yml的同级目录，springboot推荐使用logback-spring.xml而不是logback.xml文件，logback-spring.xml的配置内容如下所示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;60 seconds&quot; debug=&quot;false&quot;&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        简要描述</span><br><span class="line">        日志格式 =&gt; %d&#123;HH:mm:ss.SSS&#125;(时间) [%-5level](日志级别) %logger&#123;36&#125;(logger名字最长36个字符，否则按照句点分割) - %msg%n(具体日志信息并且换行)</span><br><span class="line"></span><br><span class="line">        开发环境 =&gt; $&#123;basepackage&#125;包下控制台打印DEBUG级别及以上、其他包控制台打印INFO级别及以上</span><br><span class="line">        演示（测试）环境 =&gt; $&#123;basepackage&#125;包下控制台打印INFO级别及以上、其他包控制台以及文件打印WARN级别及以上</span><br><span class="line">        生产环境 =&gt; 控制台以及文件打印ERROR级别及以上</span><br><span class="line"></span><br><span class="line">        日志文件生成规则如下：</span><br><span class="line">        文件生成目录 =&gt; $&#123;logdir&#125;</span><br><span class="line">        当日的log文件名称 =&gt; $&#123;appname&#125;.log</span><br><span class="line">        其他时候的log文件名称 =&gt; $&#123;appname&#125;.%d&#123;yyyy-MM-dd&#125;.log</span><br><span class="line">        日志文件最大 =&gt; $&#123;maxsize&#125;</span><br><span class="line">        最多保留 =&gt; $&#123;maxdays&#125;天</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;!--自定义参数 --&gt;</span><br><span class="line">    &lt;!--用来指定日志文件的上限大小，那么到了这个值，就会删除旧的日志--&gt;</span><br><span class="line">    &lt;property name=&quot;maxsize&quot; value=&quot;30MB&quot; /&gt;</span><br><span class="line">    &lt;!--只保留最近90天的日志--&gt;</span><br><span class="line">    &lt;property name=&quot;maxdays&quot; value=&quot;90&quot; /&gt;</span><br><span class="line">    &lt;!--application.yml 传递参数 --&gt;</span><br><span class="line">    &lt;!--log文件生成目录--&gt;</span><br><span class="line">    &lt;springProperty scope=&quot;context&quot; name=&quot;logdir&quot; source=&quot;resources.logdir&quot;/&gt;</span><br><span class="line">    &lt;!--应用名称--&gt;</span><br><span class="line">    &lt;springProperty scope=&quot;context&quot; name=&quot;appname&quot; source=&quot;resources.appname&quot;/&gt;</span><br><span class="line">    &lt;!--项目基础包--&gt;</span><br><span class="line">    &lt;springProperty scope=&quot;context&quot; name=&quot;basepackage&quot; source=&quot;resources.basepackage&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--输出到控制台 ConsoleAppender--&gt;</span><br><span class="line">    &lt;appender name=&quot;consoleLog&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;</span><br><span class="line">        &lt;!--展示格式 layout--&gt;</span><br><span class="line">        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;</span><br><span class="line">            &lt;pattern&gt;</span><br><span class="line">                &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%-5level] %logger&#123;36&#125; - %msg%n&lt;/pattern&gt;</span><br><span class="line">            &lt;/pattern&gt;</span><br><span class="line">        &lt;/layout&gt;</span><br><span class="line">    &lt;/appender&gt;</span><br><span class="line">    &lt;!--输出到文件 FileAppender--&gt;</span><br><span class="line">    &lt;appender name=&quot;fileLog&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            日志名称，如果没有File 属性，那么只会使用FileNamePattern的文件路径规则</span><br><span class="line">            如果同时有&lt;File&gt;和&lt;FileNamePattern&gt;，那么当天日志是&lt;File&gt;，明天会自动把今天</span><br><span class="line">            的日志改名为今天的日期。即，&lt;File&gt; 的日志都是当天的。</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;File&gt;$&#123;logdir&#125;/$&#123;appname&#125;.log&lt;/File&gt;</span><br><span class="line">        &lt;!--滚动策略，按照时间滚动 TimeBasedRollingPolicy--&gt;</span><br><span class="line">        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span><br><span class="line">            &lt;!--文件路径,定义了日志的切分方式——把每一天的日志归档到一个文件中,以防止日志填满整个磁盘空间--&gt;</span><br><span class="line">            &lt;FileNamePattern&gt;$&#123;logdir&#125;/$&#123;appname&#125;.%d&#123;yyyy-MM-dd&#125;.log&lt;/FileNamePattern&gt;</span><br><span class="line">            &lt;maxHistory&gt;$&#123;maxdays&#125;&lt;/maxHistory&gt;</span><br><span class="line">            &lt;totalSizeCap&gt;$&#123;maxsize&#125;&lt;/totalSizeCap&gt;</span><br><span class="line">        &lt;/rollingPolicy&gt;</span><br><span class="line">        &lt;!--日志输出编码格式化--&gt;</span><br><span class="line">        &lt;encoder&gt;</span><br><span class="line">            &lt;charset&gt;UTF-8&lt;/charset&gt;</span><br><span class="line">            &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%-5level] %logger&#123;36&#125; - %msg%n&lt;/pattern&gt;</span><br><span class="line">        &lt;/encoder&gt;</span><br><span class="line">    &lt;/appender&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 开发环境--&gt;</span><br><span class="line">    &lt;springProfile name=&quot;dev&quot;&gt;</span><br><span class="line">        &lt;root level=&quot;INFO&quot;&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;consoleLog&quot;/&gt;</span><br><span class="line">        &lt;/root&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            additivity是子Logger 是否继承 父Logger 的 输出源（appender） 的标志位</span><br><span class="line">            在这里additivity配置为false代表如果$&#123;basepackage&#125;中有INFO级别日志则子looger打印 root不打印</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;logger name=&quot;$&#123;basepackage&#125;&quot; level=&quot;DEBUG&quot; additivity=&quot;false&quot;&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;consoleLog&quot;/&gt;</span><br><span class="line">        &lt;/logger&gt;</span><br><span class="line">    &lt;/springProfile&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 演示（测试）环境--&gt;</span><br><span class="line">    &lt;springProfile name=&quot;test&quot;&gt;</span><br><span class="line">        &lt;root level=&quot;WARN&quot;&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;consoleLog&quot;/&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;fileLog&quot;/&gt;</span><br><span class="line">        &lt;/root&gt;</span><br><span class="line">        &lt;logger name=&quot;$&#123;basepackage&#125;&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;consoleLog&quot;/&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;fileLog&quot;/&gt;</span><br><span class="line">        &lt;/logger&gt;</span><br><span class="line">    &lt;/springProfile&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 生产环境 --&gt;</span><br><span class="line">    &lt;springProfile name=&quot;prod&quot;&gt;</span><br><span class="line">        &lt;root level=&quot;ERROR&quot;&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;consoleLog&quot;/&gt;</span><br><span class="line">            &lt;appender-ref ref=&quot;fileLog&quot;/&gt;</span><br><span class="line">        &lt;/root&gt;</span><br><span class="line">    &lt;/springProfile&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>日志配置中引用了application.yml的配置信息，主要有logdir、appname、basepackage三项，logdir是日志文件的写入地址，可以传入相对路径，appname是应用名称，引入这项是为了通过日志文件名称区分是哪个应该输出的，basepackage是包过滤配置。</p>
<p>比如开发环境中需要打印debug级别以上的日志，但是又想使除我写的logger之外的DEBUG不打印，可过滤到本项目的包名才用DEBUG打印，此外包名使用INFO级别打印，在application.yml中新建这三项配置，也可在不同环境配置不同属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#应用配置</span><br><span class="line">resources:</span><br><span class="line">    # log文件写入地址</span><br><span class="line">    logdir: logs/</span><br><span class="line">    # 应用名称</span><br><span class="line">    appname: spring-boot-example</span><br><span class="line">    # 日志打印的基础扫描包</span><br><span class="line">    basepackage: com.spring.demo.springbootexample</span><br></pre></td></tr></table></figure>

<p>使用不同环境启动测试logger配置是否生效，在开发环境下将打印DEBUG级别以上的四条logger记录，在演示环境下降打印INFO级别以上的三条记录并写入文件，在生产环境下只打印ERROR级别以上的一条记录并写入文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/logger&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public WebResult logger() &#123;</span><br><span class="line">    logger.trace(&quot;日志输出 &#123;&#125;&quot;, &quot;trace&quot;);</span><br><span class="line">    logger.debug(&quot;日志输出 &#123;&#125;&quot;, &quot;debug&quot;);</span><br><span class="line">    logger.info(&quot;日志输出 &#123;&#125;&quot;, &quot;info&quot;);</span><br><span class="line">    logger.warn(&quot;日志输出 &#123;&#125;&quot;, &quot;warn&quot;);</span><br><span class="line">    logger.error(&quot;日志输出 &#123;&#125;&quot;, &quot;error&quot;);</span><br><span class="line">    return &quot;00&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="常用配置"><a href="#常用配置" class="headerlink" title="常用配置"></a>常用配置</h2><h3 id="加载自定义配置"><a href="#加载自定义配置" class="headerlink" title="加载自定义配置"></a>加载自定义配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@PropertySource(value = &#123;&quot;classpath:application.yml&quot;&#125;, encoding = &quot;utf-8&quot;)</span><br><span class="line">public class Config &#123;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;resources.midpHost&#125;&quot;)</span><br><span class="line">    private String midpHost;</span><br><span class="line"></span><br><span class="line">    public String getMidpHost() &#123;</span><br><span class="line">        return midpHost;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全局异常处理器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@ControllerAdvice</span><br><span class="line">public class GlobalExceptionResolver &#123;</span><br><span class="line"></span><br><span class="line">    Logger logger = LoggerFactory.getLogger(GlobalExceptionResolver.class);</span><br><span class="line"></span><br><span class="line">    @ExceptionHandler(value = Exception.class)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public WebResult exceptionHandle(HttpServletRequest req, Exception ex) &#123;</span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">        logger.error(&quot;未知异常&quot;, ex);</span><br><span class="line">        return WebResult.error(ERRORDetail.RC_0401001);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/calebman/spring-boot-example">https://github.com/calebman/spring-boot-example</a><br>这篇文章中的技术我都去使用过，但是和这个的配置方式有所不同。于是在这里保存一下。</p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Spring-boot/" rel="tag"># Spring boot</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/11/16/rabbitMQ%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/" rel="prev" title="rabbitMQ远程连接失败问题">
                  <i class="fa fa-chevron-left"></i> rabbitMQ远程连接失败问题
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/11/30/mysql%E9%94%99%E8%AF%AF%EF%BC%9AIncorrect%20key%20file%20for%20table/" rel="next" title="mysql错误：Incorrect key file for table">
                  mysql错误：Incorrect key file for table <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ezio</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"live2d":null,"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"left","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
